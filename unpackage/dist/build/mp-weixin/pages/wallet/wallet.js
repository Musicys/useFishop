(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/wallet/wallet"],{"1bb4":function(t,e,n){"use strict";n.r(e);var i=n("4516"),s=n("d4a0");for(var a in s)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(a);n("b0f2");var o=n("f0c5"),u=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"5db54140",null,!1,i["a"],void 0);e["default"]=u.exports},"221b":function(t,e,n){"use strict";(function(t,i){var s=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(n("e7c9")),o={data:function(){return{isvip:!1,isFx:!1,usedata:[],api_syssn:"",price:""}},methods:{goyem:function(){t.navigateTo({url:"/pages/walletlist/walletlist"})},isvipbd:function(){var t=this;a.default.request({url:"https://bjcore01.vanshin.fun/fish/user/info",header:{sessionid:JSON.parse(i.getStorageSync("user")).sessionid}}).then((function(e){t.isvip=e.data.is_vip,t.price=e.data.balance_desc,t.isFx=!0}))},addhyxx:function(){var t=this;a.default.request({header:{sessionid:JSON.parse(i.getStorageSync("user")).sessionid},url:"https://bjcore01.vanshin.fun/fish/prepaid_act/list"}).then((function(e){t.usedata=e.data.list})).catch((function(t){}))},addhy:function(){var t=this,e=this.usedata.map((function(t,e){return t.description}));e=e.slice(0,6),i.showActionSheet({itemList:e,success:function(e){t.goapi(t.usedata[e.tapIndex])},fail:function(t){}})},goapi:function(e){var n=this,s=e.sill_amt;e.price=s,i.login().then((function(s){a.default.request({url:"https://bjcore01.vanshin.fun/fish/trade/create",method:"POST",header:{sessionid:JSON.parse(i.getStorageSync("user")).sessionid},data:{item_id:e.id,menu:JSON.stringify(e),busicd:"700000",openid:JSON.parse(i.getStorageSync("user")).openid}}).then((function(e){n.api_syssn=e.data.syssn,t.showLoading({title:"支付中....",mask:!0}),i.requestPayment({timeStamp:e.data.timestamp,nonceStr:e.data.nonce_str,package:"prepay_id=".concat(e.data.prepay_id),signType:e.data.sign_type,paySign:e.data.pay_sign,success:function(t){"requestPayment:ok"==t.errMsg&&n.gofish()},fail:function(e){t.hideLoading(),t.showToast({title:"支付失败",icon:"none",duration:1500})}})}))}))},gofish:function(){var e=this;a.default.request({url:"https://bjcore01.vanshin.fun/fish/trade/query",method:"POST",header:{sessionid:JSON.parse(i.getStorageSync("user")).sessionid},data:{syssn:this.api_syssn}}).then((function(n){t.hideLoading(),t.showToast({title:"支付成功",icon:"none",duration:1500}),e.isvipbd()}))},hysm:function(){i.showModal({title:"会员说明",showCancel:!1,content:"返鱼优化，充值福利",success:function(t){t.confirm}})}},mounted:function(){this.isvipbd(),this.addhyxx()},onShow:function(){i.getStorageSync("user")?(this.isvipbd(),this.addhyxx()):i.switchTab({url:"/pages/my/my",success:function(e){t.showToast({title:"请先登录",icon:"none",duration:1e3})}})}};e.default=o}).call(this,n("543d")["default"],n("bc2e")["default"])},"44e8":function(t,e,n){"use strict";(function(t,e){var i=n("4ea4");n("f47a");i(n("66fd"));var s=i(n("1bb4"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(s.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},4516:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){}));var i=function(){var t=this.$createElement;this._self._c},s=[]},"941a":function(t,e,n){},b0f2:function(t,e,n){"use strict";var i=n("941a"),s=n.n(i);s.a},d4a0:function(t,e,n){"use strict";n.r(e);var i=n("221b"),s=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=s.a}},[["44e8","common/runtime","common/vendor"]]]);