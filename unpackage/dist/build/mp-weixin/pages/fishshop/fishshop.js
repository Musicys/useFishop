(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/fishshop/fishshop"],{"09d4":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){}));var n=function(){var e=this.$createElement;this._self._c},i=[]},"2cae":function(e,t,s){},"40a3":function(e,t,s){"use strict";s.r(t);var n=s("09d4"),i=s("8226");for(var a in i)["default"].indexOf(a)<0&&function(e){s.d(t,e,(function(){return i[e]}))}(a);s("7f14");var o=s("f0c5"),r=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);t["default"]=r.exports},"475a":function(e,t,s){"use strict";(function(e,n){var i=s("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(s("e7c9")),o={components:{Cart:function(){s.e("components/Cart").then(function(){return resolve(s("de37"))}.bind(null,s)).catch(s.oe)}},data:function(){return{id:0,usedata:{},api_respcd:"",api_price:0,api_syssn:"",shopfish:"800201",isshop:!0}},onLoad:function(){var t=getApp().useshopfish;this.usedata=t,this.id=t.id,this.api_respcd=JSON.parse(e.getStorageSync("user")).respcd,this.api_price=this.usedata.price_desc+this.usedata.pledge_desc},watch:function(){},methods:{setshopfish:function(){var t=this;e.showActionSheet({itemList:["微信支付","会员钱包支付"],success:function(e){1===e.tapIndex?t.shopfish="700001":t.shopfish="800201"},fail:function(e){}})},goapi:function(){var t=this;this.isshop&&(this.isshop=!1,"700001"==this.shopfish?a.default.request({url:"https://bjcore01.vanshin.fun/fish/trade/create",header:{sessionid:JSON.parse(e.getStorageSync("user")).sessionid},method:"POST",data:{item_id:this.id,menu:JSON.stringify(this.usedata),busicd:this.shopfish,openid:JSON.parse(e.getStorageSync("user")).openid}}).then((function(e){"0000"===e.respcd?(t.api_syssn=e.data.syssn,n.showToast({title:"购买成功",icon:"none",duration:1500}),t.gofish()):n.showToast({title:"余额不足",icon:"none",duration:1500})})):e.login().then((function(s){a.default.request({url:"https://bjcore01.vanshin.fun/fish/trade/create",method:"POST",header:{sessionid:JSON.parse(e.getStorageSync("user")).sessionid},data:{item_id:t.id,menu:JSON.stringify(t.usedata),busicd:t.shopfish,openid:JSON.parse(e.getStorageSync("user")).openid}}).then((function(s){t.api_syssn=s.data.syssn,n.showLoading({title:"支付中....",mask:!0}),e.requestPayment({timeStamp:s.data.timestamp,nonceStr:s.data.nonce_str,package:"prepay_id=".concat(s.data.prepay_id),signType:s.data.sign_type,paySign:s.data.pay_sign,success:function(e){"requestPayment:ok"==e.errMsg&&t.gofish()},fail:function(e){n.hideLoading(),n.showToast({title:"支付失败",icon:"none",duration:1500}),t.isshop=!0}})}))})))},gofish:function(){a.default.request({url:"https://bjcore01.vanshin.fun/fish/trade/query",method:"POST",header:{sessionid:JSON.parse(e.getStorageSync("user")).sessionid},data:{syssn:this.api_syssn}}).then((function(t){n.hideLoading(),getApp().usetab=1,e.switchTab({url:"../index/index"})}))}}};t.default=o}).call(this,s("bc2e")["default"],s("543d")["default"])},"5e36":function(e,t,s){"use strict";(function(e,t){var n=s("4ea4");s("f47a");n(s("66fd"));var i=n(s("40a3"));e.__webpack_require_UNI_MP_PLUGIN__=s,t(i.default)}).call(this,s("bc2e")["default"],s("543d")["createPage"])},"7f14":function(e,t,s){"use strict";var n=s("2cae"),i=s.n(n);i.a},8226:function(e,t,s){"use strict";s.r(t);var n=s("475a"),i=s.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){s.d(t,e,(function(){return n[e]}))}(a);t["default"]=i.a}},[["5e36","common/runtime","common/vendor"]]]);